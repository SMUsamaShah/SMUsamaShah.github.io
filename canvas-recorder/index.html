<!DOCTYPE html>
<html lang="en-us">
  <head>
	<title>CanvasRecorder.js | XOSH.ORG</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/images/site.webmanifest">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A simple script to record canvas to webm">

	<meta property="og:title" content="CanvasRecorder.js" />
<meta property="og:description" content="A simple script to record canvas to webm" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xosh.org/canvas-recorder/" /><meta property="og:image" content="https://xosh.org/site-feature-image.jpg"/><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2018-10-26T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-10-26T00:00:00+00:00" /><meta property="og:site_name" content="My cool site" />


	<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://xosh.org/site-feature-image.jpg"/>

<meta name="twitter:title" content="CanvasRecorder.js"/>
<meta name="twitter:description" content="A simple script to record canvas to webm"/>

	
	<script data-ad-client="ca-pub-6900458819212175" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<meta name="google-site-verification" content="fcsy6xwzGDIwyzoNhlebWTJvbkmQNzPNwrpy0YpIqHI"/>
	
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-8113893-21', 'auto');
	
	ga('send', 'pageview');
}
</script>
	
	
    
    
        <script type="application/ld+json">
        
        { 
            "@context": "http://schema.org", 
            "@type": "BlogPosting",
            "headline": "CanvasRecorder.js",
            "genre": "Code",  
            "url": "https:\/\/xosh.org\/canvas-recorder\/",
            "datePublished": "2018-10-26 00:00:00 \u002b0000 UTC",
            "description": "A simple script to record canvas to webm",
            "author": {
                "@type": "Person",
                "name": ""
            }
         }
        
        </script>
    
	
	
	<link rel="stylesheet" href="/css/style.css" />
    
    <link rel="stylesheet" href="https://xosh.org/css/custom.css">
    <header>

  <nav>
    <ul>
      
      
      <li class="pull-left ">
        <a href="https://xosh.org/">~/xosh.org</a>
      </li>
      
      
      <li class="pull-left ">
        <a href="/tags/">~/tags</a>
      </li>
      

      
      
      <li class="pull-right">
        <a href="/index.xml">~/rss</a>
      </li>
      

    </ul>
  </nav>
</header>

  </head>

  <body>
    <br/>

<div class="article-meta">
<h1><span class="title">CanvasRecorder.js</span></h1>

<date class="date">2018/10/26</date>
<p class="terms">
  
  
  Categories: <a href="/categories/code">Code</a> 
  
  
  
  Tags: <a href="/tags/js">js</a> 
  
  
</p>
</div>


<div class="content-wrapper">
  <main>
    <p>I made some visualizations in HTML5 canvas and wanted to record them to display in blog.
Could not find a simple way to do that. <a href="https://github.com/spite/ccapture.js">CCapture.js</a> added too much performance overhead which made animations slow.
CanvasRecorder.js uses built in <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder"><code>MediaRecorder</code></a> which is apparently the simplest and most effitient way to record whatever is happening on canvas.</p>
<p>NOTE: I have only tested it with Chrome and it should work fine with Firefox</p>
<p>Link: <a href="https://github.com/SMUsamaShah/CanvasRecorder">CanvasRecorder</a></p>
<h2 id="how-to-use">How to use</h2>
<p>Create a recorder</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">canvas</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;animation&#39;</span>);
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">recorder</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">CanvasRecorder</span>(<span style="color:#a6e22e">canvas</span>);
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// optional: bits per second for video quality, defaults to 2.5Mbps
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">recorder</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">CanvasRecorder</span>(<span style="color:#a6e22e">canvas</span>, <span style="color:#ae81ff">4500000</span>);
</code></pre></div><p>Start recording</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">recorder</span>.<span style="color:#a6e22e">start</span>();
</code></pre></div><p>Stop recording</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">recorder</span>.<span style="color:#a6e22e">stop</span>();
</code></pre></div><p>Save/download recording</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">recorder</span>.<span style="color:#a6e22e">save</span>();

<span style="color:#75715e">// Save with given file name
</span><span style="color:#75715e"></span><span style="color:#a6e22e">recorder</span>.<span style="color:#a6e22e">save</span>(<span style="color:#e6db74">&#39;busy_motion.webm&#39;</span>);
</code></pre></div>
    <a href="/"> >> Home</a>
  </main>
  <div class="disqus-comments">                  
    <button id="show-comments" class="btn btn-default" type="button" 
    style="margin-left: auto;margin-right: auto;display: block;">Show <span class="disqus-comment-count" data-disqus-url="https://xosh.org/canvas-recorder">comments</span>
    </button>
    <div id="disqus_thread"></div>
  </div>
  <script id="dsq-count-scr" src="//smusamashah.disqus.com/count.js" async></script>
  <script>
    (function(){
      let showCommentsBtn = document.getElementById("show-comments");
      showCommentsBtn.onclick = function(){
        var disqus_shortname = 'smusamashah';
    
        (function() {
          var disqus = document.createElement('script'); 
          disqus.type = 'text/javascript'; 
          disqus.async = true;
          disqus.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(disqus);
        })();
    
        showCommentsBtn.style.display="none"; 
      };
    })();
  </script>
</div>
    <footer>
      
<script>
(function() {
  function center_el(tagName) {
    var tags = document.getElementsByTagName(tagName), i, tag;
    for (i = 0; i < tags.length; i++) {
      tag = tags[i];
      var parent = tag.parentElement;
      
      if (parent.childNodes.length === 1) {
        
        if (parent.nodeName === 'A') {
          parent = parent.parentElement;
          if (parent.childNodes.length != 1) continue;
        }
        if (parent.nodeName === 'P') parent.style.textAlign = 'center';
      }
    }
  }
  var tagNames = ['img', 'embed', 'object'];
  for (var i = 0; i < tagNames.length; i++) {
    center_el(tagNames[i]);
  }
})();
</script>

      
      <hr/>
      <a href="https://github.com/smusamashah">Github</a> | <a href="https://www.linkedin.com/in/smusamashah/">LinkedIn</a> | <a href="/cv">Resume</a>
      
    </footer>
  </body>
</html>

